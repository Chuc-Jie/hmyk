import{d as V}from"./order.ce1d5450.js";import{_ as A,d as L,r as M,a as H,o as j,w as S,p as U,c as h,b as d,g as t,A as G,u as J,i as c,j as n,f as r,e as m,h as s,t as y,n as _,F as K,m as O,y as w}from"./index.9ff7eb4f.js";import{F as P,_ as Q}from"./footer.1784d682.js";const W={class:"container"},X=["src"],Y={class:"goods-name-box"},Z={class:"goods-name"},ee={class:"goods-params"},te={style:{"margin-top":"15px"}},ae=_("\u5BFC\u51FA\u5168\u90E8"),oe=_("\u590D\u5236\u5168\u90E8"),ne={style:{"margin-top":"-10px","padding-bottom":"10px"}},de={key:0},ce=_("\u590D\u5236\u5185\u5BB9"),re=_("\u8F6C\u6362\u4E8C\u7EF4\u7801"),se=_("\u8F6C\u6362\u6587\u5B57"),ie=L({__name:"detail",setup(le){const f=G(),C=J(),e=M({loading:!0,order:{cdk:[],buy_info:{sku_name:""}},goods:{},qr_code:[],data:{site_name:"",template:{site:{}}}}),x=H();j(()=>{S(()=>e.data.template=x.value.state.data)});const q=()=>{C.back()};function v(o,a){e.qr_code[o].show=a}function B(o){var a=document.createElement("input");a.value=o,document.body.appendChild(a),a.select(),window.document.execCommand("copy"),document.body.removeChild(a),w({type:"success",message:"\u590D\u5236\u6210\u529F"})}const F=()=>{location.href="/shop/order/exportCdk/order_no/"+f.query.out_trade_no},E=()=>{var o=document.createElement("textarea"),a="";for(let l in e.qr_code)l>0&&(a+=`
`),a+=e.qr_code[l].cdk;o.value=a,document.body.appendChild(o),o.select(),window.document.execCommand("copy"),document.body.removeChild(o),w({type:"success",message:"\u590D\u5236\u6210\u529F"})};return V(f.query.out_trade_no).then(o=>{U("\u8BA2\u5355\u8BE6\u60C5"),e.goods=o.data.goods,e.order=o.data.order;for(let a in e.order.cdk){let l="/api/v1/pisces/qrCode?qr_code="+encodeURIComponent(e.order.cdk[a]);e.qr_code.push({cdk:e.order.cdk[a],qr_code:l,show:"cdk"})}}),(o,a)=>{const l=c("el-page-header"),b=c("el-col"),z=c("el-tag"),D=c("el-row"),p=c("el-button"),u=c("el-card"),N=c("el-image"),R=c("el-timeline-item"),$=c("el-timeline"),I=c("el-main"),T=c("el-container");return n(),h("div",W,[d(Q,{default_active:"1",ref_key:"headerRef",ref:x},null,512),d(T,null,{default:t(()=>[d(I,{class:"main"},{default:t(()=>[d(u,{class:"card","body-style":"padding-bottom: 10px; padding-top: 10px;"},{default:t(()=>[d(l,{content:e.order.out_trade_no,onBack:q,style:{"margin-bottom":"15px"}},null,8,["content"]),d(D,{gutter:15,class:"card-row"},{default:t(()=>[e.data.template.hidden_cover==0?(n(),r(b,{key:0,xs:6,sm:3,md:2,lg:2,xl:2},{default:t(()=>[m("img",{class:"goods-image",src:e.goods.cover},null,8,X)]),_:1})):s("",!0),d(b,{xs:18,sm:21,md:22,lg:22,xl:22},{default:t(()=>[m("div",Y,[m("span",Z,y(e.goods.name),1)]),m("div",ee,[d(z,{class:"goods-price",type:"danger"},{default:t(()=>[_(y(e.order.buy_info.sku_name),1)]),_:1})])]),_:1})]),_:1}),m("div",te,[e.qr_code.length>0?(n(),r(p,{key:0,type:"danger",onClick:F},{default:t(()=>[ae]),_:1})):s("",!0),e.qr_code.length>0?(n(),r(p,{key:1,type:"info",onClick:E},{default:t(()=>[oe]),_:1})):s("",!0)])]),_:1}),e.order.status!="wait-pay"&&e.goods.buy_msg!=""?(n(),r(u,{key:0,class:"buy-msg-card","body-style":"padding-bottom: 10px; padding-top: 10px;",innerHTML:e.goods.buy_msg},null,8,["innerHTML"])):s("",!0),e.qr_code.length>0?(n(),r(u,{key:1,class:"box-card","body-style":"padding-bottom: 0px; padding-top: 22px;"},{default:t(()=>[d($,{class:"timeline"},{default:t(()=>[(n(!0),h(K,null,O(e.qr_code,(i,g)=>(n(),r(R,{class:"timeline-item",key:g,placement:"top"},{default:t(()=>[m("div",ne,[i.show=="cdk"?(n(),h("span",de,y(i.cdk),1)):s("",!0),i.show=="qr_code"?(n(),r(N,{key:1,style:{width:"150px",height:"150px"},src:i.qr_code},null,8,["src"])):s("",!0)]),d(p,{type:"default",plain:"",size:"small",onClick:k=>B(i.cdk)},{default:t(()=>[ce]),_:2},1032,["onClick"]),i.show=="cdk"?(n(),r(p,{key:0,type:"primary",plain:"",size:"small",onClick:k=>v(g,"qr_code")},{default:t(()=>[re]),_:2},1032,["onClick"])):s("",!0),i.show=="qr_code"?(n(),r(p,{key:1,type:"primary",plain:"",size:"small",onClick:k=>v(g,"cdk")},{default:t(()=>[se]),_:2},1032,["onClick"])):s("",!0)]),_:2},1024))),128))]),_:1})]),_:1})):s("",!0)]),_:1})]),_:1}),d(P,{pet_name:e.data.template.site.shop_pet_name,beian:e.data.template.site.beian},null,8,["pet_name","beian"])])}}});var ue=A(ie,[["__scopeId","data-v-7a863c28"]]);export{ue as default};
