import{_ as B,d as F,r as E,a as q,o as _,w as C,G as D,c as I,b as a,f as t,A as k,u as R,h as o,i as u,m as s,t as p,e as S,g as N,n as c,B as U,C as z,p as A}from"./index.08eb56a6.js";import{c as T,F as V,H}from"./footer.dd270afd.js";const O="/api/v1/pisces/";function G(n){return T({url:O+"payStatus/out_trade_no/"+n,method:"get"})}const J=n=>(U("data-v-620a9ec6"),n=n(),z(),n),M={class:"container"},j={style:{}},K=c(" \u8BF7\u4F7F\u7528"),L={class:"pay-type"},P=c("\u626B\u7801\u652F\u4ED8 "),Q=J(()=>s("span",{class:"cny"},"\uFFE5",-1)),W={class:"goods-price"},X={style:{"margin-top":"8px"}},Y=c("\u6B63\u5728\u68C0\u6D4B\u652F\u4ED8\u72B6\u6001"),Z=c("\u6253\u5F00\u652F\u4ED8\u5B9D\u4ED8\u6B3E"),$=F({__name:"pay",setup(n){const m=k(),y=R(),e=E({post:{},qr_code:"",template:{site:{}},pay_type:""}),r=q();_(()=>{C(()=>{e.template=r.value.state.data,A("\u626B\u7801\u4ED8\u6B3E - "+e.template.site.shop_title)})}),e.post=JSON.parse(decodeURIComponent(window.atob(decodeURIComponent(m.query.post)))),console.log(e.post),e.post.pay_type=="alipay"&&(e.pay_type="\u652F\u4ED8\u5B9D"),e.post.pay_type=="wxpay"&&(e.pay_type="\u5FAE\u4FE1"),e.qr_code="/api/v1/pisces/qrCode?qr_code="+encodeURIComponent(e.post.qr_code);const x=()=>{location.href="alipays://platformapi/startapp?saId=10000007&qrcode="+e.post.qr_code};var i=setInterval(()=>{G(e.post.out_trade_no).then(d=>{d.data==1&&(clearTimeout(i),y.push({path:"/order/detail",query:{out_trade_no:e.post.out_trade_no}}))})},3e3);return _(async()=>{D(()=>{clearTimeout(i)})}),(d,ee)=>{const g=o("el-image"),l=o("el-button"),f=o("el-col"),h=o("el-row"),v=o("el-card"),b=o("el-main"),w=o("el-container");return u(),I("div",M,[a(H,{ref_key:"headerRef",ref:r},null,512),a(w,null,{default:t(()=>[a(b,{class:"main"},{default:t(()=>[a(v,{class:"box-card box-card-pay","body-style":"padding: 15px;"},{default:t(()=>[a(h,{gutter:15,class:"card-row"},{default:t(()=>[a(f,{xl:24,style:{"text-align":"center"}},{default:t(()=>[s("div",j,[K,s("span",L,p(e.pay_type),1),P,Q,s("span",W,p(e.post.order_money),1)]),s("div",null,[a(g,{class:"qr-code",style:{},src:e.qr_code,fit:"fill"},null,8,["src"])]),s("div",X,"\u3010 "+p(e.post.goods_name)+" x "+p(e.post.buy_num)+" \u3011",1),a(l,{type:"primary",loading:"true",style:{"margin-top":"20px","letter-spacing":"1px"}},{default:t(()=>[Y]),_:1}),e.post.pay_type=="alipay"&&e.post.is_mobile==!0?(u(),S(l,{key:0,type:"default",plain:"",style:{"margin-top":"20px","letter-spacing":"1px"},onClick:x},{default:t(()=>[Z]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(V,{pet_name:e.template.site.shop_pet_name,beian:e.template.site.beian},null,8,["pet_name","beian"])])}}});var oe=B($,[["__scopeId","data-v-620a9ec6"]]);export{oe as default};
